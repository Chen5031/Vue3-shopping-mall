'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var nprogress = require('nprogress');
var shared = require('@vueuse/shared');
var vueDemi = require('vue-demi');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var nprogress__default = /*#__PURE__*/_interopDefaultLegacy(nprogress);

function useNProgress(currentProgress = null, options) {
  const progress = vueDemi.ref(currentProgress);
  const isLoading = vueDemi.computed({
    set: (load) => load ? nprogress__default["default"].start() : nprogress__default["default"].done(),
    get: () => shared.isNumber(progress.value) && progress.value < 1
  });
  if (options)
    nprogress__default["default"].configure(options);
  const setProgress = nprogress__default["default"].set;
  nprogress__default["default"].set = (n) => {
    progress.value = n;
    return setProgress.call(nprogress__default["default"], n);
  };
  vueDemi.watchEffect(() => {
    if (shared.isNumber(progress.value) && shared.isClient)
      setProgress.call(nprogress__default["default"], progress.value);
  });
  shared.tryOnScopeDispose(nprogress__default["default"].remove);
  return {
    isLoading,
    progress,
    start: nprogress__default["default"].start,
    done: nprogress__default["default"].done,
    remove: () => {
      progress.value = null;
      nprogress__default["default"].remove();
    }
  };
}

exports.useNProgress = useNProgress;
